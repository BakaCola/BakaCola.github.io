<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Untitled</title>
    <link href="/2023/10/cca99601dc93.html"/>
    <url>/2023/10/cca99601dc93.html</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>运维</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Redis集群部署</title>
    <link href="/2023/10/2526cc97d9e8.html"/>
    <url>/2023/10/2526cc97d9e8.html</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
      <tag>Cluster</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K3s+Kubesphere+Helm 部署</title>
    <link href="/2023/10/a49bd50ea128.html"/>
    <url>/2023/10/a49bd50ea128.html</url>
    
    <content type="html"><![CDATA[<h1 id="K3s-部署"><a href="#K3s-部署" class="headerlink" title="K3s 部署"></a>K3s 部署</h1><h2 id="Why-K3s？"><a href="#Why-K3s？" class="headerlink" title="Why K3s？"></a>Why K3s？</h2><blockquote><p>K3s 是轻量级的 Kubernetes。K3s 易于安装，仅需要 Kubernetes 内存的一半，所有组件都在一个小于 100 MB 的二进制文件中。</p></blockquote><p>对于一部分的服务器而言，其服务器性能可能不足以支撑K8S的运行，或者说想要把更多的计算资源给到自己想要运行的服务时，这时可以考虑选择K3S。相较于K8S，其所需要的硬件配置更低，具体可以在<a href="https://docs.k3s.io/zh/installation/requirements"><strong>这里</strong></a>查看K3S所需要的安装要求。以下截取了官网中对于硬件的最低建议：</p><table><thead><tr><th>Spec</th><th>最低</th><th>推荐</th></tr></thead><tbody><tr><td>CPU</td><td>1 核</td><td>2 核</td></tr><tr><td>内存</td><td>512 MB</td><td>1 GB</td></tr></tbody></table><p><strong>注意：</strong> K3S默认使用<strong>Sqlite</strong>作为默认存储机制的轻量级存储后端，使用<strong>containerd</strong>作为容器的运行环境。倘若要进行修改，可以在安装的时候加以参数进行设置，详细见<a href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E9%A1%B9%E5%AE%89%E8%A3%85K3s">指定配置项安装K3s部分</a>。</p><h2 id="使用在线脚本进行部署"><a href="#使用在线脚本进行部署" class="headerlink" title="使用在线脚本进行部署"></a>使用在线脚本进行部署</h2><blockquote><p>参考连接：<a href="https://docs.k3s.io/zh/quick-start">https://docs.k3s.io/zh/quick-start</a></p></blockquote><p>使用官方源在线下载脚本并部署（速度较慢），</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sfL https://get.k3s.io | sh -<br></code></pre></td></tr></table></figure><p>或者使用镜像源下载脚本并使用国内镜像进行部署（推荐）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -<br></code></pre></td></tr></table></figure><h2 id="使用离线镜像进行部署"><a href="#使用离线镜像进行部署" class="headerlink" title="使用离线镜像进行部署"></a>使用离线镜像进行部署</h2><h2 id="指定配置项安装K3s"><a href="#指定配置项安装K3s" class="headerlink" title="指定配置项安装K3s"></a>指定配置项安装K3s</h2><blockquote><p>参考连接：<a href="https://docs.k3s.io/zh/installation/configuration">https://docs.k3s.io/zh/installation/configuration</a></p></blockquote><h3 id="部分可能用到的配置项："><a href="#部分可能用到的配置项：" class="headerlink" title="部分可能用到的配置项："></a>部分可能用到的配置项：</h3><h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><table><thead><tr><th>Flag</th><th>环境变量</th><th>描述</th></tr></thead><tbody><tr><td><code>--datastore-endpoint</code> value</td><td>K3S_DATASTORE_ENDPOINT</td><td>指定 etcd、Mysql、Postgres 或 Sqlite（默认）数据源名称。</td></tr></tbody></table><h4 id="Agent"><a href="#Agent" class="headerlink" title="Agent"></a>Agent</h4><h5 id="Agent节点"><a href="#Agent节点" class="headerlink" title="Agent节点"></a>Agent节点</h5><table><thead><tr><th>Flag</th><th>环境变量</th><th>描述</th></tr></thead><tbody><tr><td>–node-name value</td><td>K3S_NODE_NAME</td><td>节点名称</td></tr></tbody></table><h5 id="Agent运行时"><a href="#Agent运行时" class="headerlink" title="Agent运行时"></a>Agent运行时</h5><table><thead><tr><th>Flag</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td><code>--docker</code></td><td>-</td><td>用 docker 代替 containerd</td></tr><tr><td><code>--private-registry value</code></td><td>“&#x2F;etc&#x2F;rancher&#x2F;k3s&#x2F;registries.yaml”</td><td>私有镜像仓库配置文件</td></tr></tbody></table><h3 id="使用配置项进行安装"><a href="#使用配置项进行安装" class="headerlink" title="使用配置项进行安装"></a>使用配置项进行安装</h3><blockquote><p>参考连接：<a href="https://docs.k3s.io/zh/installation/configuration">https://docs.k3s.io/zh/installation/configuration</a></p></blockquote><p>要在安装时使用指定配置项进行K3S的安装，可以使用3种方式进行配置项的指定</p><h4 id="在执行安装脚本前指定配置项环境变量的值"><a href="#在执行安装脚本前指定配置项环境变量的值" class="headerlink" title="在执行安装脚本前指定配置项环境变量的值"></a>在执行安装脚本前指定配置项环境变量的值</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_DATASTORE_ENDPOINT=etcd sh -<br></code></pre></td></tr></table></figure><h4 id="在执行安装脚本前使用INSTALL-K3S-EXEC指定安装的参数"><a href="#在执行安装脚本前使用INSTALL-K3S-EXEC指定安装的参数" class="headerlink" title="在执行安装脚本前使用INSTALL_K3S_EXEC指定安装的参数"></a>在执行安装脚本前使用<code>INSTALL_K3S_EXEC</code>指定安装的参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn  sh -<br></code></pre></td></tr></table></figure><h2 id="卸载K3s"><a href="#卸载K3s" class="headerlink" title="卸载K3s"></a>卸载K3s</h2><p>若使用的为脚本安装方式，则在安装过程中会生成一个卸载脚本，该脚本为于</p><p><code>/usr/local/bin/k3s-uninstall.sh</code>或者<code>/usr/local/bin/k3s-uninstall.sh</code></p><p>可以通过以下指令卸载K3S：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>bash /usr/local/bin/k3s-uninstall.sh<br><span class="hljs-comment"># 或者使用以下指令</span><br>bash /usr/local/bin/k3s-uninstall.sh<br></code></pre></td></tr></table></figure><h1 id="在K3s上部署Kubesphere"><a href="#在K3s上部署Kubesphere" class="headerlink" title="在K3s上部署Kubesphere"></a>在K3s上部署Kubesphere</h1><h2 id="安装Kubesphere"><a href="#安装Kubesphere" class="headerlink" title="安装Kubesphere"></a>安装Kubesphere</h2><blockquote><p>参考连接：<a href="https://www.kubesphere.io/zh/docs/v3.4/installing-on-kubernetes/introduction/overview/">https://www.kubesphere.io/zh/docs/v3.4/installing-on-kubernetes/introduction/overview/</a></p></blockquote><h3 id="卸载Kubesphere"><a href="#卸载Kubesphere" class="headerlink" title="卸载Kubesphere"></a>卸载Kubesphere</h3><blockquote><p>参考连接：<a href="https://www.kubesphere.io/zh/docs/v3.4/installing-on-kubernetes/uninstall-kubesphere-from-k8s/">https://www.kubesphere.io/zh/docs/v3.4/installing-on-kubernetes/uninstall-kubesphere-from-k8s/</a></p></blockquote><p>使用</p><p>具体内容如下：</p><h1 id="Helm部署"><a href="#Helm部署" class="headerlink" title="Helm部署"></a>Helm部署</h1><h3 id="安装Helm"><a href="#安装Helm" class="headerlink" title="安装Helm"></a>安装Helm</h3><blockquote><p>参考连接：<a href="https://helm.sh/zh/docs/intro/install/">https://helm.sh/zh/docs/intro/install/</a></p></blockquote><blockquote><p>参考连接：</p></blockquote><p><strong>注意</strong>：在安装完Helm后，应该指定KUBECONFIG环境变量指向K3S的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> KUBECONFIG=/etc/rancher/k3s/k3s.yaml<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>运维</category>
      
      <category>Kubernetes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>K3s</tag>
      
      <tag>Kubesphere</tag>
      
      <tag>Helm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hello-world</title>
    <link href="/2023/10/2999b158c161.html"/>
    <url>/2023/10/2999b158c161.html</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
